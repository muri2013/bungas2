<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>DOWN THE GAME</title>
  <style>
    body {
      margin: 0;
      background: #222;
      color: purple;
      font-family: sans-serif;
      text-align: center;
    }

    canvas {
      display: block;
      margin: 20px auto;
      background: #87ceeb;
      border: 3px solid white;
    }

    h1, h2, h3 {
      margin: 10px;
    }
  </style>
</head>
<body>
  <h1>Pontuação: <span id="score">0</span></h1>
  <h2>Tempo: <span id="tempo">20</span>s</h2>
  <h3>Fase: <span id="fase">1</span></h3>

  <canvas id="game" width="600" height="400"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");
    const scoreEl = document.getElementById("score");
    const tempoEl = document.getElementById("tempo");
    const faseEl = document.getElementById("fase");

    let score = 0;
    let fase = 1;
    let tempo = 20; // tempo inicial
    let numPessoas = 5;
    const pessoas = [];

    const larguraAreaPessoas = 450; // área que pessoas podem aparecer (esquerda)
    const tamanhoPessoa = 60;

    const imagemPessoa = new Image();
    imagemPessoa.src = "pessoa.png";

    const Donw.png = new Image();
    spriteGrande.src = "DONW.png"; // a sprite maior que fica fixa no lado direito (150x400, por ex)

    let jogoAtivo = true;
    let timer;

    function gerarPessoas() {
      pessoas.length = 0;
      for (let i = 0; i < numPessoas; i++) {
        pessoas.push({
          x: Math.random() * (larguraAreaPessoas - tamanhoPessoa),
          y: Math.random() * (canvas.height - tamanhoPessoa),
          size: tamanhoPessoa
        });
      }
    }

    function desenhar() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Desenha pessoas na área esquerda
      for (let p of pessoas) {
        ctx.drawImage(imagemPessoa, p.x, p.y, p.size, p.size);
      }

      // Desenha sprite grande fixa na direita
      const spriteX = larguraAreaPessoas; // 450px
      const spriteY = 0;
      const spriteWidth = canvas.width - larguraAreaPessoas; // 150px
      const spriteHeight = canvas.height; // 400px

      ctx.drawImage(spriteGrande, spriteX, spriteY, spriteWidth, spriteHeight);
    }

    canvas.addEventListener("click", function(e) {
      if (!jogoAtivo) return;

      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      // Só conta clique se for na área das pessoas (esquerda)
      if (x > larguraAreaPessoas) return;

      for (let i = 0; i < pessoas.length; i++) {
        const p = pessoas[i];
        if (
          x >= p.x &&
          x <= p.x + p.size &&
          y >= p.y &&
          y <= p.y + p.size
        ) {
          score++;
          scoreEl.textContent = score;
          pessoas.splice(i, 1);
          break;
        }
      }

      if (pessoas.length === 0) {
        fase++;
        faseEl.textContent = fase;

        numPessoas += 2;

        tempo = 20; // reseta tempo
        tempoEl.textContent = tempo;

        gerarPessoas();
      }

      desenhar();
    });

    function atualizarTempo() {
      if (!jogoAtivo) return;

      tempo--;
      tempoEl.textContent = tempo;

      if (tempo <= 0) {
        clearInterval(timer);
        jogoAtivo = false;
        alert(`DONW foi abusado!\n vc matou: ${score}\noxente foi na fase : ${fase}`);
      }
    }

    // Quando as duas imagens estiverem carregadas, começa o jogo
    let imagensCarregadas = 0;
    function imagemCarregou() {
      imagensCarregadas++;
      if (imagensCarregadas === 2) {
        gerarPessoas();
        desenhar();
        timer = setInterval(atualizarTempo, 1000);
      }
    }
    imagemPessoa.onload = imagemCarregou;
 donw.png.onload = imagemCarregou;

  </script>
</body>
</html>


